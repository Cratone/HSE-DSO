# EVIDENCE/P09 Structure Documentation

## Purpose
This directory contains automated security supply chain analysis artifacts for the Recipe Box API project, generated as part of Practice P09 (SBOM & SCA).

## Directory Structure

```
EVIDENCE/P09/
├── sbom.json              # Software Bill of Materials (CycloneDX format)
├── sca_report.json        # Security Component Analysis full report
├── sca_summary.md         # Human-readable summary with action plan
└── EVIDENCE_STRUCTURE.md  # This file
```

## Files Description

### sbom.json
- **Format**: CycloneDX JSON (industry standard)
- **Tool**: Syft v1.5.0 by Anchore
- **Content**: Complete inventory of all project dependencies including:
  - Direct dependencies from `requirements.txt`
  - Transitive dependencies from virtual environment
  - Package metadata (name, version, licenses, CPEs, PURLs)
- **Use Cases**:
  - Supply chain transparency
  - License compliance auditing
  - Dependency tracking for security and legal teams
  - Input for vulnerability scanning tools

### sca_report.json
- **Format**: Grype JSON report
- **Tool**: Grype v0.78.0 by Anchore
- **Content**: Detailed vulnerability scan results including:
  - Matched vulnerabilities (CVE/GHSA IDs)
  - Severity ratings (Critical/High/Medium/Low/Negligible)
  - Affected packages and versions
  - Fix availability and version constraints
  - CVSS scores and vectors
  - Advisory URLs and descriptions
- **Use Cases**:
  - Automated security analysis
  - Integration with vulnerability management systems
  - Compliance reporting (SOC2, ISO 27001)
  - Risk assessment and prioritization

### sca_summary.md
- **Format**: Markdown (human-readable)
- **Content**: Executive summary including:
  - Severity distribution statistics
  - Top Critical/High findings
  - Detailed analysis of each vulnerability
  - Risk assessment and impact analysis
  - Action plan and remediation steps
  - References to source materials
- **Use Cases**:
  - Quick vulnerability overview for developers
  - Management reporting
  - Security team triage
  - Documentation for DS (Development Security) reports

## Integration with CI/CD

These artifacts are automatically generated by `.github/workflows/ci-sbom-sca.yml` on:
- Push events affecting Python code or dependencies
- Manual workflow dispatch
- Changes to the workflow file itself

The workflow:
1. Uses fixed tool versions for reproducibility
2. Publishes artifacts to GitHub Actions (14-day retention)
3. Includes metadata (commit SHA, timestamps) for traceability
4. Runs in parallel with main CI pipeline (no blocking)

## Traceability

Each artifact generation is linked to:
- **Commit SHA**: Exact code snapshot analyzed
- **Workflow Run**: GitHub Actions job URL
- **Timestamp**: UTC generation time
- **Tool Versions**: Fixed in workflow environment variables

Find the latest workflow runs at:
https://github.com/Cratone/HSE-DSO/actions/workflows/ci-sbom-sca.yml

## Usage for DS Section

For final project reports (Development Security section):
1. Reference the latest `sca_summary.md` for current state
2. Link to specific workflow runs for historical tracking
3. Document any waivers from `task/templates/policy/waivers.yml`
4. Show remediation progress (before/after SCA scans)

## Retention Policy

- **GitHub Actions Artifacts**: 14 days (configurable)
- **Git-committed files**: Permanent (part of repository history)
- **Recommendation**: Commit files after significant milestones or releases

## Related Documentation

- Vulnerability Management Policy: `project/69_sbom-vuln-mgmt.md` (if exists)
- Waiver Template and Examples: `task/templates/policy/waivers.yml`
- CI/CD Overview: `project/68_ci-cd-minimum.md` (if exists)
- Practice Description: `task/00_overview.md`, `task/02_checklist.md`

## Maintenance

This directory structure should remain stable across practices. When adding new security tools or scans:
1. Follow similar naming conventions (`tool_report.json`, `tool_summary.md`)
2. Update this documentation
3. Maintain traceability metadata
4. Consider artifact size and retention policies
